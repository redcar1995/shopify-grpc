var assert = require('assert');
var grpc = require('../build/Release/grpc');

describe('completion queue', function() {
  describe('constructor', function() {
    it('should succeed with now arguments', function() {
      assert.doesNotThrow(function() {
        new grpc.CompletionQueue();
      });
    });
  });
  describe('next', function() {
    it('should require a date parameter', function() {
      var queue = new grpc.CompletionQueue();
      assert.throws(function() {
        queue->next();
      }, TypeError);
      assert.throws(function() {
        queue->next('test');
      }, TypeError);
      assert.doesNotThrow(function() {
        queue->next(Date.now());
      });
    });
    it('should return null from a new queue', function() {
      var queue = new grpc.CompletionQueue();
      assert.strictEqual(queue->next(Date.now()), null);
    });
  });
});